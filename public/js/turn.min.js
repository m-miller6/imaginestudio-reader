/*
 * turn.js 4th release
 * turnjs.com
 * turnjs.com/license.txt
 *
 * Copyright (C) 2012 Emmanuel Garcia
 * All rights reserved
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):(t=t||self,t.turn=e(t.jQuery))}(this,function(t){"use strict";var e=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(t);function i(){return!e.isTouch}function n(){return!!e.isTouch}function o(t,i){for(var n=0;n<i.length;n++){var o=i[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function l(t,e){return e={exports:{}},t(e,e.exports),e.exports}var d=l(function(t,e){t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events={}}return n(t,[{key:"addEventListener",value:function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)}},{key:"removeEventListener",value:function(t,e){this.events[t]&&(this.events[t]=this.events[t].filter(function(t){return t!==e}))}},{key:"dispatchEvent",value:function(t){var e=this;if(this.events[t.type]){var i=!1;return t.preventDefault=function(){i=!0},this.events[t.type].forEach(function(n){n.call(e,t)}),!i}return!0}}]),t}();var r=function(){function t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=t,this.options=Object.assign({flipDuration:1e3,pageNumber:1,numberOfPages:1},e),this.currentAnimation=null,this.currentGesture=null,this.currentPage=1,this.ctx=this.canvas.getContext("2d"),this.setCanvasSize(),this.initEvents()}return n(t,[{key:"setCanvasSize",value:function(){var t=this.canvas.getBoundingClientRect();this.canvas.width=t.width,this.canvas.height=t.height}},{key:"initEvents",value:function(){var t=this;this.canvas.addEventListener("mousedown",function(e){return t.onMouseDown(e)}),this.canvas.addEventListener("touchstart",function(e){return t.onTouchStart(e)}),window.addEventListener("resize",function(){return t.setCanvasSize()})}},{key:"onMouseDown",value:function(t){this.startFlip(t.clientX,t.clientY)}},{key:"onTouchStart",value:function(t){t.preventDefault();var e=t.touches[0];this.startFlip(e.clientX,e.clientY)}},{key:"startFlip",value:function(t,e){var i=this.canvas.getBoundingClientRect(),n=t-i.left,o=e-i.top;this.isNearEdge(n,o)&&this.animateFlip()}},{key:"isNearEdge",value:function(t,e){var i=this.canvas.width,n=this.canvas.height;return t<.2*i||t>.8*i||e<.1*n||e>.9*n}},{key:"animateFlip",value:function(){var t=this;this.currentAnimation=setInterval(function(){t.draw()},16)}},{key:"draw",value:function(){var t=this.ctx;t.clearRect(0,0,this.canvas.width,this.canvas.height),t.fillStyle="#f9f9f9",t.fillRect(0,0,this.canvas.width,this.canvas.height),t.strokeStyle="#ddd",t.lineWidth=2,t.strokeRect(0,0,this.canvas.width,this.canvas.height),t.fillStyle="#333",t.font="16px Arial",t.textAlign="center",t.fillText("Page ".concat(this.currentPage),this.canvas.width/2,this.canvas.height/2)}},{key:"turnPage",value:function(){this.currentPage=this.currentPage>=this.options.numberOfPages?1:this.currentPage+1,this.draw()}},{key:"destroy",value:function(){this.currentAnimation&&clearInterval(this.currentAnimation),this.canvas.removeEventListener("mousedown",this.onMouseDown),this.canvas.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("resize",this.setCanvasSize)}}]),t}();e.default=r}])});var c=d;function p(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})}function g(t){return"undefined"!=typeof t}function f(t,e){return parseInt(t,10)||e||0}function v(t){return parseFloat(t)||0}function w(t){for(var e=["Moz","Webkit","Khtml","O","ms"],i=t.charAt(0).toUpperCase()+t.substr(1),n=0;n<e.length;n++)if(g(document.body.style[e[n]+i]))return e[n]+i;return g(document.body.style[t])?t:""}function m(t,e){var i=Math.PI/180;return{x:Math.cos(i*e)*t.x-Math.sin(i*e)*t.y,y:Math.sin(i*e)*t.x+Math.cos(i*e)*t.y}}function y(t,e){return{x:t.x-e.x,y:t.y-e.y}}function b(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}function A(t,e){var i=b(t)*b(e);return i?(t.x*e.x+t.y*e.y)/i:0}function x(t,e,i){return t+(e-t)*i}function z(t,e){var i=[];if(t&&e){for(var n=Math.ceil(t);n<=e;n++)i.push(n);if(i[0]-1>=1)for(var o=i[0]-1;o>=1;o--)i.unshift(o);if(i[i.length-1]+1<=e)for(var r=i[i.length-1]+1;r<=e;r++)i.push(r)}return i}function S(t){var i=[""];return t&&t.split(" ").forEach(function(t){t&&(""==i[i.length-1]?i[i.length-1]=t:i.push(t))}),i.join(" ").split(" ")}function M(t,i){return t&&e(t).data()&&e(t).data().f?e(t).data().f.options[i]:null}function $(t,i,n){var o=["single","double"];return t?o[t-1]:i&&-1!=e.inArray(i,o)?e.inArray(i,o)+1:n?M(n,"display"):1}function O(t,i,n){return t?t:2==i?"single":"double"}function P(t,i){return t?t:2==$(i)?"portrait":"landscape"}function C(t,e,i){return 1!=e?"double"==t:f(i)%2==0}function j(t,e,i,n){if(e){if(2==$(e)){case 1:case 2:return 1;default:return 2}}else switch(n||M(t,"display")){case 1:case 2:return 1;default:return 2}}return i}function D(t,e){var i=t.turn("display"),n=t.turn("size");return 2==i&&2==e&&e<n?e+1:e}function k(t,e){if(e){var i=t.turn("size");if(2==t.turn("display")&&e>1&&e<i)return!(e%2)}return!1}function T(t,e){if(e){var i=t.turn("display"),n=t.turn("size");if(e<=0||e>n)throw E(e+" is not a page");switch(i){case 1:return[e];case 2:return e%2?[e]:2==e?[1,2]:e==n?[e]:[e-1,e]}}return[]}function E(t){function e(t){this.name="Bad Page Value",this.message=t}return e.prototype=Error.prototype,new e(t)}function H(t,e){return 2==t.turn("display")?e%2==0?e-1:e:e}function R(t,e){return 2==t.turn("display")?e%2==0?e:e+1:e}function L(t,e){return 2==t.turn("display")&&(1==e||e==t.turn("size")&&e%2==0)}function I(t,e){return 2==t.turn("display")&&(e==t.turn("size")||1==e&&e%2==0)}function F(t,e){return 2==t.turn("display")&&e%2==0}function N(t,e){return 2==t.turn("display")&&e%2!=0}function W(t){if(t){var e=M(t,"zoom");return e&&1!=e?e:1}return 1}function Y(t,e,i,n){var o=t.turn("options"),r=t.turn("size"),a=[0,0],s=a,h=0;switch(o.direction){case"ltr":h=e>r/2?Math.round(i.x/n):Math.round(i.x/n+t.width()/n/2),a=[Math.max(0,h),Math.round(i.y/n)];break;case"rtl":h=e>r/2?Math.round(t.width()/n-i.x/n):Math.round(t.width()/n/2-i.x/n),a=[Math.max(0,h),Math.round(i.y/n)]}return o.turnCorners?s=a:0!=a[0]||0!=a[1]||(s=o.cornerSize?[o.cornerSize,o.cornerSize]:a),s}function B(t,e,i){var n,o,r,a=t.turn("options"),s=t.turn("display"),h=t.turn("size"),u=V(t,e),l=Z(t,e),d=90*i,c=2==s&&k(t,e),p=2==s&&k(t,e-1),g="single"==a.elevation,f=l.css("z-index")||0,v=u.css("z-index")||0;if(e>h)return!1;switch(s){case 1:u.transform("rotate("+d+"deg) scale("+a.zoom+")",a.duration,function(){var i=e<=h;g&&(f!=a.elevation&&u.css({zIndex:a.elevation}),u.transform("",0),i||u.hide())}),1==i&&u.addClass("fixed");break;case 2:c||p?(o=(c?l:u).transform(),r=c?"left":"right",n=c?h:1,c?(u.transform("",0),f!=a.elevation&&u.css({zIndex:a.elevation})):p&&(f!=a.elevation&&l.css({zIndex:a.elevation}),l.transform("")),0==i?(i=function(){var t=e<=h;g&&(g&&f!=a.elevation&&u.css({zIndex:a.elevation}),g&&f!=a.elevation&&l.css({zIndex:a.elevation}),p&&(l.transform(""),u.transform("rotateY(0deg)")),c&&(u.transform(""),l.transform("rotateY(0deg)")),t||u.add(l).hide())},c?l.transform("rotateY(-90deg) translateZ("+a.elevation+"px)",a.duration,i):u.transform("rotateY(90deg) translateZ("+a.elevation+"px)",a.duration,i)):1==i&&(c?u.transform("rotateY(-90deg) translateZ("+a.elevation+"px)",a.duration):l.transform("rotateY(90deg) translateZ("+a.elevation+"px)",a.duration)),2==i&&(c?l.transform("rotateY(0deg)",a.duration):u.transform("rotateY(0deg)",a.duration))):(u.transform("",0),f!=a.elevation&&u.css({zIndex:a.elevation}),u.hide())}return!0}function q(t,e,i){var n=z(D(t,e),t.turn("size"));return i?n:e?n.slice(0,-1):n.slice(1)}function G(t,e){var i,n,o,r=t.turn("options"),a=t.turn("size"),s=t.turn("display"),h=V(t,e),u=Z(t,e),l=2==s&&k(t,e);e>a||(i=M(t,"effect"),o="single"==r.elevation,r.acceleration&&(h.css({"-webkit-transform":"",transform:""}),u.css({"-webkit-transform":"",transform:""})),h.removeClass("fixed"),u.removeClass("fixed"),h.removeClass("hard"),u.removeClass("hard"),h.show(),u.show(),o&&(h.css({zIndex:""}),u.css({zIndex:""})),e<=a&&(n=h.add(u),r.acceleration&&n.removeClass("no-transition"),n.removeClass("ignore-hover-events"),n.unbind(i.transitionEnd),h.removeClass("odd"),h.removeClass("even"),u.removeClass("odd"),u.removeClass("even"),1==s?(e%2?h.addClass("odd"):h.addClass("even"),1==e&&h.addClass("hard")):2==s&&(l&&(u.removeClass("left-side"),u.removeClass("right-side"),u.addClass("right-side"),h.removeClass("left-side"),h.removeClass("right-side"),h.addClass("left-side")),e%2?u.addClass("odd"):u.addClass("even"),h.removeClass("left-side"),h.removeClass("right-side"),u.removeClass("left-side"),u.removeClass("right-side"),1==e?(h.addClass("fixed"),u.addClass("left-side")):e==a?(u.addClass("fixed"),h.addClass("right-side")):(h.addClass("left-side"),u.addClass("right-side")),2==e&&h.addClass("hard"),e==a-1&&u.addClass("hard"))))}function V(t,e){return t.turn("page",e)}function Z(t,e){return t.turn("page",e+1)}function Q(t,e){return e=e||t.turn("page"),t.turn("view",e)}function X(t,e){return t.turn("view",e+1)}function U(t,i){var n,o=t.turn("options"),r=o.duration,a=t.data().totalPages;if(o.acceleration){if(!(n=M(t,"effect")))throw new Error('"' + o.effect + '" effect not defined');r*=n.duration}for(var s=1;s<=a;s++)G(t,s);if(o.acceleration)for(var h=function(a){var s=V(t,a),h=Z(t,a);s.addClass("no-transition"),h.addClass("no-transition"),setTimeout(function(){s.removeClass("no-transition"),h.removeClass("no-transition")},r+1)},u=1;u<=a;u++)h(u);t.trigger("turning",[i,t.turn("view",i)]);var l=t.turn("view",i);e.isArray(l)&&1==l.length&&t.trigger("missing",[i,l]),B(t,i,0),t.turn("page",i).addClass("hard").show(),i<a&&t.turn("page",i+1).addClass("hard").show(),setTimeout(function(){B(t,i,1),t.trigger("turned",[i,t.turn("view",i)])},1)}function K(t,e,i,n){var o,r,a,s,h,u,l,d,c,p,g=t.turn("options"),f=t.turn("animating"),v=t.turn("size");if(f)return!1;if(1==v)return!1;if(e<=0||e>v)throw E(e+" is not a page");if(o=t.turn("view"),g.when&&1!=g.when[e]&&(o[0]==e||o[1]==e))return!1;if(g.turn&&o[0]==e)return o.length>1&&g.turn(e+1),!1;if(g.turn&&o.length>1&&o[1]==e)return g.turn(e-1),!1;if(n||(n=g.direction),i||(i=t.turn("view",e).length>1?"l"==n[0]?"r":"l":"r"),s=1==T(t,e).length,h="l"==i,u=h!=("ltr"==n),l=h?e-1:e+1,!(r=M(t,"effect")))throw new Error('"' + g.effect + '" effect not defined');if(a=r.triggerEvents(e),g.acceleration&&(d=V(t,e),c=V(t,l),p=0,u?(d.addClass("ignore-hover-events"),a.orientation="r",a.direction=h?"previous":"next",s&&d.trigger("start",[a,u]),p=d.width()):(c.addClass("ignore-hover-events"),a.orientation="l",a.direction=h?"next":"previous",s&&c.trigger("start",[a,u]),p=c.width()),a.corner=u?"br":"bl",a.px=p),g.acceleration){if(g.turnCorners){var w=Y(t,e,{x:g.turnCorners.bl.x,y:g.turnCorners.bl.y},W(t));a.corner=h?"tl":"tr",a.px=Math.sqrt(Math.pow(w[0],2)+Math.pow(w[1],2))||200}t.trigger("turning",[e,Q(t,e),a]),r.prepare(a,function(){t.turn("animating",!0),setTimeout(function(){B(t,e,1)},1),r.play(a,g.duration,function(){B(t,e,0),t.turn("animating",!1),a.direction&&t.trigger("turned",[e,Q(t,e),a])})})}else U(t,e);return!0}function J(t,e,i){var n=t.turn("options");if(n.acceleration){if(!M(t,"effect"))throw new Error('"' + n.effect + '" effect not defined');var o=n.effect,r=V(t,e);(V(t,e).hasClass("f-page-effect")||Z(t,e).hasClass("f-page-effect"))&&(r.addClass("no-transition"),Z(t,e).addClass("no-transition"),setTimeout(function(){r.removeClass("no-transition"),Z(t,e).removeClass("no-transition")},1)),o.stop&&o.stop(),t.turn("animating",!1),G(t,e),t.trigger("turned",[e,t.turn("view",e)])}i&&i.call(this)}function _(t,e){var i="onorientationchange"in window,n=i?"orientationchange":"resize";i&&e.call(t),e(function(){t.off(n,e).on(n,e)})}function tt(t,e){var i=e.turn("options"),n=t.originalEvent.touches,o=n?n[0]:t,r=e.data().mouseAction;r&&!n&&"down"!=r||(t.preventDefault(),e.data().mouseAction=n?"touchstart":"mousedown",i.acceleration&&et(e,V(e,i.cornerActivation).hasClass("hard")?i.cornerActivation:0,Y(e,i.cornerActivation,{x:o.pageX,y:o.pageY},W(e))))}function et(t,e,i){var n=t.turn("options"),o=t.data(),r=M(t,"effect");if(n.acceleration){if(!r)throw new Error('"' + n.effect + '" effect not defined');r.pressed&&r.pressed.call(this,{page:e,pointX:i[0],pointY:i[1]})}}function it(t,e){var i=e.turn("options"),n=e.data().mouseAction,o=t.originalEvent.touches,r=o?o[0]:t;n&&(t.preventDefault(),n=o?"touchmove":"mousemove",e.data().mouseAction=n,i.acceleration&&nt(e,i.cornerActivation,Y(e,i.cornerActivation,{x:r.pageX,y:r.pageY},W(e))))}function nt(t,e,i){var n=t.turn("options"),o=M(t,"effect");if(n.acceleration){if(!o)throw new Error('"' + n.effect + '" effect not defined');o.moved&&o.moved.call(this,{page:e,pointX:i[0],pointY:i[1]})}}function ot(t,e){var i=e.turn("options"),n=e.data().mouseAction;n&&("touchend"==n||"touchstart"==n||"mouseup"==n||"mousedown"==n)&&(t.preventDefault(),e.data().mouseAction=null,i.acceleration&&rt(e,i.cornerActivation||e.turn("page")))}function rt(t,e){var i=t.turn("options"),n=M(t,"effect");if(i.acceleration){if(!n)throw new Error('"' + i.effect + '" effect not defined');n.released&&n.released.call(this,{page:e})}}function at(t,e){var i=t.turn("options");i.disabled||i.acceleration||K(t,e)}function st(t,e){var i=t.turn("options");i.disabled||i.acceleration||K(t,e,"r")}function ht(t){var e=t.turn("options");e.disabled||e.acceleration||t.turn("previous")}function ut(t){var e=t.turn("options");e.disabled||e.acceleration||t.turn("next")}function lt(t,e){at(e,1)}function dt(t,e){st(e,e.turn("size"))}function ct(t,e){ht(e)}function pt(t,e){ut(e)}function gt(t,e){var i=e.turn("options");if(t.keyCode==i.keyboard.previous)ht(e);else if(t.keyCode==i.keyboard.next)ut(e);else{if(t.keyCode!=i.keyboard.first)return t.keyCode!=i.keyboard.last||void st(e,e.turn("size"));at(e,1)}}var ft={};ft.effect="fade"===M?"fade":"sheet",ft.css=w("transform"),ft.transition=w("transition"),ft.isTouch=n(),ft.mouseEvents=i()?"mousedown mousemove mouseup":"touchstart touchmove touchend",ft.cssPrefix=function(){var t=w("transform"),e=["Moz","Webkit","Khtml","O","ms"];return t?t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-"):""}(),ft.canTouch=n(),ft.mouseEndEvents=i()?"mouseup":"touchend",ft.supports3d=function(){var t,e=document.createElement("div"),i="khtml"==ft.cssPrefix.substr(1,5);return(t="transformStyle"in e.style||ft.cssPrefix+"transform-style"in e.style)&&!i}();var vt={sheet:{transitionEnd:"transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",duration:.7,prepare:function(t,e){var i=this,n=Math.PI/180,o=t.page,r=t.next,a=t.px||1,s=t.corner,h=t.orientation,u=h?h:"l"==s.substr(1,1)?"l":"r",l=V(i,o),d=V(i,r),c=t.turn,p=i.data(),g=i.turn("options"),f=i.turn("size"),v=g.elevation,w="r"==u,m=Math.max(Math.round(a/10),1),y=l.css("z-index")||0,b=d.css("z-index")||0,A=w?r:o,x=2==g.display&&("tl"==s||"tr"==s)&&o>3&&r<=f,z=l.width(),S=l.height(),M=f,O=p.direction,$=i.turn("view",o),P=Math.round(a*Math.cos(n*(90/m))),C=Math.round(a*Math.sin(n*(90/m))),j="single"==g.elevation,D=0,k=0,T=z,E=S,H=z,R=S,L=!1,I=!1,F=function(t){var e=360/t.length,i="<div class='sheet-wrapper'>";t.map(function(t,n){var o=n*e;i+="<div class='sheet-face rotate"+n+"' style='"+ft.cssPrefix+"transform:rotateY("+o+"deg) translateZ("+t.properties.radius+"px);'></div>"}),i+="</div>";var n=document.createElement("div");return n.innerHTML=i,n.children[0]},N=function(t){return t*n},W=function(t,e,i){return{x:Math.cos(t)*e.x-Math.sin(t)*e.y+i.x,y:Math.sin(t)*e.x+Math.cos(t)*e.y+i.y}},Y=function(t,e,i){return{x:t.x-e*Math.cos(i),y:t.y-e*Math.sin(i)}},B=function(t,e,i,n){return i?{topLeft:W(t,{x:-(n.x-n.radius),y:-(n.y-0)},{x:n.x,y:n.y}),topRight:W(t,{x:n.width-(n.x-n.radius),y:-(n.y-0)},{x:n.x,y:n.y}),bottomLeft:W(t,{x:-(n.x-n.radius),y:n.height-(n.y-0)},{x:n.x,y:n.y}),bottomRight:W(t,{x:n.width-(n.x-n.radius),y:n.height-(n.y-0)},{x:n.x,y:n.y})}:{topLeft:W(t,{x:-(n.x+n.radius),y:-(n.y-0)},{x:n.x,y:n.y}),topRight:W(t,{x:n.width-(n.x+n.radius),y:-(n.y-0)},{x:n.x,y:n.y}),bottomLeft:W(t,{x:-(n.x+n.radius),y:n.height-(n.y-0)},{x:n.x,y:n.y}),bottomRight:W(t,{x:n.width-(n.x+n.radius),y:n.height-(n.y-0)},{x:n.x,y:n.y})}},q=function(t,e,i){var n=B(t,0,e,i),o="polygon("+(100*n.topLeft.x/i.width).toFixed(2)+"% "+(100*n.topLeft.y/i.height).toFixed(2)+"%, "+(100*n.topRight.x/i.width).toFixed(2)+"% "+(100*n.topRight.y/i.height).toFixed(2)+"%, "+(100*n.bottomRight.x/i.width).toFixed(2)+"% "+(100*n.bottomRight.y/i.height).toFixed(2)+"%, "+(100*n.bottomLeft.x/i.width).toFixed(2)+"% "+(100*n.bottomLeft.y/i.height).toFixed(2)+"%)";return o},G=function(t){var e=l.width(),i=l.height(),n=e/2,o=i;return t<=0?{x:0,y:0,width:e,height:i,angle:0,radius:0,zoom:1,centeredX:0,centeredY:0}:t>=90?{x:n,y:o,width:e,height:i,angle:Math.PI/2,radius:Math.max(e,i),zoom:1,centeredX:n-e/2,centeredY:o-i/2}:{x:w?Math.max(0,e-P):Math.min(P,e),y:Math.max(0,o-C),width:e,height:i,angle:N(t),radius:Math.min(e,C>0?C:e),zoom:1,centeredX:0,centeredY:0}},Q=function(){var t=ft.cssPrefix,e="translate3d(0px, 0px, "+v+"px)";l.css(ft.cssPrefix+"transform-origin",w?"100% 0%":"0% 100%").transform(e+"rotateY(0deg)",0),d.transform(e+"rotateY("+(w?180:-180)+"deg)",0),l.show(),d.show(),j||(l.css({zIndex:v}),d.css({zIndex:v})),x&&(I=!0,d.addClass("fixed"))},X=function(t,e){var n,o,r,a,s=w?"right":"left",h=w?"left":"right",u=ft.cssPrefix,c="translate3d(0px, 0px, "+v+"px)",p=w?1:-1,f=G(t);0==t?(l.transform(c,e),d.transform(c+"rotateY("+(w?180:-180)+"deg)",e),L=!1):t>=90?(n=w?"0% 0%":"100% 100%",l.css(u+"transform-origin",n).transform(c+"rotateY("+(w?-90:90)+"deg)",e),d.css(u+"transform-origin",n).transform(c+"rotateY(0deg)",e),L=!0):((o=Y({x:f.x,y:f.y},f.radius,f.angle)).x<0&&(o.x=0),o.x>f.width&&(o.x=f.width),o.y<0&&(o.y=0),o.y>f.height&&(o.y=f.height),r=100*o.x/f.width,a=100*o.y/f.height,n=r.toFixed(2)+"% "+a.toFixed(2)+"%",l.css(u+"transform-origin",n).transform(c+"rotateY("+p*f.angle+"rad)",e),d.css(u+"transform-origin",n).transform(c+"rotateY("+(p*f.angle-p*Math.PI)+"rad)",e),g.gradients&&(l.css("clip-path",q(f.angle,w,f)).css("-webkit-clip-path",q(f.angle,w,f)),d.css("clip-path",q(f.angle-Math.PI,!w,f)).css("-webkit-clip-path",q(f.angle-Math.PI,!w,f))),L=f.angle<Math.PI/2)},U=function(t){i.turn("animating",!0);var n=setInterval(function(){X(k+=m,0),k>=90&&(clearInterval(n),i.turn("animating",!1),e.call(i))},t);X(k+=m,0)};if(g.acceleration)l.addClass("no-transition"),d.addClass("no-transition"),Q(),setTimeout(function(){l.removeClass("no-transition"),d.removeClass("no-transition")},0);else{if(!ft.supports3d)return e.call(this,!1);U(Math.round(g.duration/m))}e.call(this,!0)},play:function(t,e,i){var n=this,o=n.data(),r=t.page,a=t.next,s=V(n,r),h=V(n,a),u=t.turn,l=n.turn("options"),d="r"==t.orientation,c=Math.max(Math.round((t.px||1)/10),1),p=0,g=function(t){var o=setInterval(function(){p+=c,function(t){var e,i,o,r,a=s.width(),h=s.height(),u=Math.PI/180,c=ft.cssPrefix,p="translate3d(0px, 0px, "+l.elevation+"px)",g=d?1:-1,f=t<=0?0:t>=90?90:t,v=function(t){var e=a/2,i=h;return t<=0?{x:0,y:0,width:a,height:h,angle:0,radius:0,zoom:1,centeredX:0,centeredY:0}:t>=90?{x:e,y:i,width:a,height:h,angle:Math.PI/2,radius:Math.max(a,h),zoom:1,centeredX:e-a/2,centeredY:i-h/2}:{x:d?Math.max(0,a-Math.round((t.px||1)*Math.cos(u*(90/c)))):Math.min(Math.round((t.px||1)*Math.cos(u*(90/c))),a),y:Math.max(0,i-Math.round((t.px||1)*Math.sin(u*(90/c)))),width:a,height:h,angle:t*u,radius:Math.min(a,Math.round((t.px||1)*Math.sin(u*(90/c)))>0?Math.round((t.px||1)*Math.sin(u*(90/c))):a),zoom:1,centeredX:0,centeredY:0}}(f);0==f?(s.transform(p,0),h.transform(p+"rotateY("+(d?180:-180)+"deg)",0)):f>=90?(e=d?"0% 0%":"100% 100%",s.css(c+"transform-origin",e).transform(p+"rotateY("+(d?-90:90)+"deg)",0),h.css(c+"transform-origin",e).transform(p+"rotateY(0deg)",0)):((i=function(t,e,i){return{x:t.x-e*Math.cos(i),y:t.y-e*Math.sin(i)}}({x:v.x,y:v.y},v.radius,v.angle)).x<0&&(i.x=0),i.x>v.width&&(i.x=v.width),i.y<0&&(i.y=0),i.y>v.height&&(i.y=v.height),o=100*i.x/v.width,r=100*i.y/v.height,e=o.toFixed(2)+"% "+r.toFixed(2)+"%",s.css(c+"transform-origin",e).transform(p+"rotateY("+g*v.angle+"rad)",0),h.css(c+"transform-origin",e).transform(p+"rotateY("+(g*v.angle-g*Math.PI)+"rad)",0))}(p),p>=90&&(clearInterval(o),i&&i.call(n))},Math.round(e/c));g(0)};g.duration=e,l.acceleration?g(e):function(t){n.turn("animating",!0);var e=setInterval(function(){t(p+=c),p>=90&&(clearInterval(e),n.turn("animating",!1),i&&i.call(n))},Math.round(l.duration*1e3/c));t(p)}(function(t){!function(t){var e,i,o,r,a=s.width(),h=s.height(),u=ft.cssPrefix,c="translate3d(0px, 0px, "+l.elevation+"px)",p=d?1:-1,g=function(t){var e=a/2,i=h,n=Math.PI/180,o=Math.max(Math.round((f.px||1)/10),1);return t<=0?{x:0,y:0,width:a,height:h,angle:0,radius:0,zoom:1,centeredX:0,centeredY:0}:t>=90?{x:e,y:i,width:a,height:h,angle:Math.PI/2,radius:Math.max(a,h),zoom:1,centeredX:e-a/2,centeredY:i-h/2}:{x:d?Math.max(0,a-Math.round((f.px||1)*Math.cos(n*(90/o)))):Math.min(Math.round((f.px||1)*Math.cos(n*(90/o))),a),y:Math.max(0,i-Math.round((f.px||1)*Math.sin(n*(90/o)))),a),width:a,height:h,angle:t*n,radius:Math.min(a,Math.round((f.px||1)*Math.sin(n*(90/o)))>0?Math.round((f.px||1)*Math.sin(n*(90/o))):a),zoom:1,centeredX:0,centeredY:0}}(t);0==t?(s.transform(c,0),h.transform(c+"rotateY("+(d?180:-180)+"deg)",0)):t>=90?(e=d?"0% 0%":"100% 100%",s.css(u+"transform-origin",e).transform(c+"rotateY("+(d?-90:90)+"deg)",0),h.css(u+"transform-origin",e).transform(c+"rotateY(0deg)",0)):((i=function(t,e,i){return{x:t.x-e*Math.cos(i),y:t.y-e*Math.sin(i)}}({x:g.x,y:g.y},g.radius,g.angle)).x<0&&(i.x=0),i.x>g.width&&(i.x=g.width),i.y<0&&(i.y=0),i.y>g.height&&(i.y=g.height),o=100*i.x/g.width,r=100*i.y/g.height,e=o.toFixed(2)+"% "+r.toFixed(2)+"%",s.css(u+"transform-origin",e).transform(c+"rotateY("+p*g.angle+"rad)",0),h.css(u+"transform-origin",e).transform(c+"rotateY("+(p*g.angle-p*Math.PI)+"rad)",0))}(t)})},stop:function(){for(var t=this,e=t.turn("size"),i=1;i<=e;i++)V(t,i).stop(!0,!0)},pressed:function(t){},moved:function(t){},released:function(t){},triggerEvents:function(t){return{corner:"",next:H(this,t),page:t,turn:this}}}};function wt(t,e){var i=!1;return e=e||window.event,e.wheelDelta?i=e.wheelDelta>0:e.detail&&(i=e.detail<0),i&&t.turn("previous"),i||t.turn("next"),!1}var mt={init:function(t){var i,n,o=e(this),r=o.data(),a=o.turn("options"),s=a.pages;if(r.destroying)return this;if(o.data().init)return this;if(n=a,e.extend(ft,n),!a.acceleration||ft.supports3d){if(ft.isTouch||a.acceleration||(o.bind("mousedown",function(t){return tt(t,o)}),e(document).bind("mousemove",function(t){return it(t,o)}).bind("mouseup",function(t){return ot(t,o)})),ft.isTouch&&!a.acceleration&&o.bind("touchstart touchmove touchend touchcancel",function(t){return"touchstart"==t.type?tt(t,o):"touchmove"==t.type?it(t,o):"touchend"==t.type?ot(t,o):void 0}),a.autoCenter&&_(this,function(){o.turn("center")}),!s)throw new Error("Option `pages` required");if("number"==typeof s)o.data().totalPages=s;else{if("function"!=typeof s)throw new Error("Invalid pages value");o.data().totalPages=s()}if(o.css({position:"relative",overflow:"hidden"}),o.data().pageObjs={},o.data().pageWrap={},o.data().pageZoom={},o.data().totalPages<2)throw new Error("Option `pages` must be greater than two");if(r.pageObjs={},r.pageWrap={},r.pagePlace={},r.pageMv={},r.zoom=a.zoom,r.totalPages=o.data().totalPages,r.eventHandlers={touchStart:tt,touchMove:it,touchEnd:ot,start:at,end:st,previous:ht,next:ut,first:lt,last:dt,left:ct,right:pt,keyboard:gt,swipeLeft:st,swipeRight:at},1==a.display)o.addClass("shadow");else if(2==a.display){o.addClass("hard");var h=!I(o,a.page);if(a.closed&&h){o.addClass("closed");var u=N(o,a.page)?"r":"l";o.addClass(u)}}else{if(3!=a.display)throw new Error(a.display+" is not a value for the display");o.addClass("magazine")}for(o.data().display=a.display,o.data().disabled=!1,o.data().animating=!1,o.data().mouseAction=!1,i=0;i<o.children().length;i++){var l=e(o.children()[i]),d=f(l.attr("page"));d&&(o.data().pageObjs[d]=l,l.data("page",d))}o.data().noClass=o.attr("class"),o.data().size=a.size,o.data().direction=a.direction,G(o,a.page),o.data().done=!0,o.data().init=!0,e.isArray(a.when)&&(a.when.length>=2?(a.when[0]&&o.bind("turned",a.when[0]),a.when[1]&&o.bind("turning",a.when[1])):a.when[0]&&o.bind("turned",a.when[0]));for(var c in r.eventHandlers)a.acceleration||o.bind(c,r.eventHandlers[c]);return a.keyboard&&e(document).bind("keydown",r.eventHandlers.keyboard),a.acceleration||(o.bind("start",r.eventHandlers.start),o.bind("end",r.eventHandlers.end),o.bind("swipeLeft",r.eventHandlers.swipeLeft),o.bind("swipeRight",r.eventHandlers.swipeRight)),a.mouse&&o.bind("wheel mousewheel DOMMouseScroll MozMousePixelScroll",function(t){return wt(o,t)}),o.turn("update"),this}},destroy:function(){var t=e(this),i=t.data(),n=t.turn("options");if(i.init){if(i.destroying=!0,i.animating&&t.turn("stop"),t.parent().is("body")&&t.turn("stop"),e(document).unbind("keydown",i.eventHandlers.keyboard),e(window).unbind("resize",t.data().eventHandlers.resize),e(document).unbind("mousemove",i.eventHandlers.touchMove).unbind("mouseup",i.eventHandlers.touchEnd),t.unbind("touchmove",i.eventHandlers.touchMove).unbind("touchend",i.eventHandlers.touchEnd).unbind("touchstart",i.eventHandlers.touchStart).unbind("zoom",i.eventHandlers.zoom).unbind("snap",i.eventHandlers.snap).unbind("resize",i.eventHandlers.resize).unbind("mousedown",i.eventHandlers.touchStart).unbind("wheel mousewheel DOMMouseScroll MozMousePixelScroll"),n.acceleration)for(var o=1,r=t.turn("size");o<=r;o++)t.turn("page",o).removeClass("p"+o+" page-"+o+" odd even left-side right-side hard fixed");else{for(var a in i.eventHandlers)t.unbind(a,i.eventHandlers[a]);t.removeClass("shadow hard magazine closed r l"),t.attr("class",i.noClass||"")}for(var s in i)i.hasOwnProperty(s)&&delete i[s];return this}},is:function(){return void 0!==e(this).data().page||void 0!==e(this).data().ownTurn},center:function(t){var i=e(this),n=i.data(),o=i.turn("options"),r=o.size;if(t)e.extend(o,{width:t.width,height:t.height});else{if(!i.data().init)return this;t={width:o.width,height:o.height}}if(n.init&&2==o.display&&L(i,o.page)){var a=i.turn("size"),s=C(i.data().pageObjs[H(i,o.page)],i.data().pageObjs[R(i,o.page)],o),h=Math.round(t.width/2),u=Math.round(t.height/2),l=Math.round(r.width/2),d=Math.round(r.height/2);if(i.css({top:u-d,left:h-l}),s){var c=i.children("div.turn-page");c.css({top:d-Math.round(c.height()/2),left:l-Math.round(c.width()/2)})}}return this},destroy:function(){return mt.destroy.call(this)},is:function(){return mt.is.call(this)},options:function(t){return t?e(this).data().options=e.extend(e(this).data().options||{},t):e(this).data().options},page:function(t,i){var n=e(this),o=n.data();if(o.init){if(void 0===t)return o.pageObjs[t]||n.data().page;if(o.pageObjs[t])return o.pageObjs[t];if(o.pageObjs[t]=n.children().eq(t-1),!i){var r=n.turn("options");o.pageObjs[t].addClass("page-"+t),o.pageObjs[t].addClass("p"+t),"single"!=r.elevation&&o.pageObjs[t].addClass("hard"),t%2?o.pageObjs[t].addClass("odd"):o.pageObjs[t].addClass("even")}return o.pageObjs[t]}},addPage:function(t,i){var n=e(this),o=n.data(),r=n.turn("options");if(t)if(o.init){if(i<=0||i>o.totalPages+1)throw E(i+" is not a page");var a=o.totalPages+1;o.totalPages=a,J(n,n.turn("page")),o.pageObjs[a]=e(t),i<a&&(o.pageObjs[i]=o.pageObjs[a]);for(var s=a;s>i;s--)o.pageObjs[s]=o.pageObjs[s-1],o.pageObjs[s].removeClass("p"+(s-1)).addClass("p"+s);o.pageObjs[i]=e(t),o.pageObjs[i].addClass("page-"+i),o.pageObjs[i].addClass("p"+i),"single"!=r.elevation&&o.pageObjs[i].addClass("hard"),i%2?o.pageObjs[i].addClass("odd"):o.pageObjs[i].addClass("even"),i<=o.page&&(o.page++,n.turn("page",o.page)),n.turn("update")}else e(this).children().eq(i-1).length?e(this).children().eq(i-1).before(t):e(this).append(t)},removePage:function(t){var i=e(this),n=i.data();if(n.init){if(t<=0||t>n.totalPages)throw E(t+" is not a page");var o,r=n.totalPages;n.totalPages=r-1,J(i,i.turn("page")),delete n.pageObjs[t];for(o=t+1;o<=r;o++)n.pageObjs[o-1]=n.pageObjs[o],n.pageObjs[o-1].removeClass("p"+o+" page-"+o).addClass("p"+(o-1)+" page-"+(o-1));delete n.pageObjs[r],t<n.page&&(n.page--,i.turn("page",n.page)),i.turn("update")}},hasPage:function(t){return!(!e(this).data().pageObjs||!e(this).data().pageObjs[t])},size:function(t){if(void 0===t)return e(this).data().size||e(this).turn("options").size;var i=e(this),n=i.data(),o=n.size;i.data().size=t,n.init&&e.extend(n,{size:t,currentView:i.turn("view"),animating:!1,page:1}),i.turn("options",{size:t}),n.init&&(i.turn("page",Math.min(Math.max(1,n.page),t)),G(i,i.turn("view")))},display:function(t){if(void 0===t)return e(this).data().display;var i=e(this),n=i.data(),o=n.display;if(t!=o)switch(n.display=t,t){case 1:i.removeClass("shadow hard magazine closed r l").addClass("shadow");break;case 2:i.removeClass("shadow hard magazine closed r l").addClass("hard"),N(i,n.page)||i.addClass("closed");break;case 3:i.removeClass("shadow hard magazine closed r l").addClass("magazine")}var r=i.turn("options");r.display=t,n.init&&(G(i,i.turn("view")),i.turn("update"))},direction:function(t){if(void 0===t)return e(this).data().direction;var i=e(this),n=i.data();n.direction=t,n.init&&(i.turn("size",i.turn("size")),G(i,i.turn("view")))},animate:function(t){var i=e(this);return i.data().init?B(i,i.turn("page"),t):this},animating:function(t){return void 0===t?!!e(this).data().animating:(e(this).data().animating=!!t,this)},turn:function(t,i){var n=e(this),o=n.data(),r=n.turn("options");if(o.init){if(o.disabled&&"destroy"!=t)return this;switch(t){case"previous":n.data().page>1&&K(n,n.data().page-1,i);break;case"next":n.data().page<n.data().totalPages&&K(n,n.data().page+1,i);break;case"first":K(n,1,i);break;case"last":K(n,n.data().totalPages,i);break;default:K(n,t,i)}return this}},page:function(t){var i=e(this).data();return void 0===t?i.page:(i.page=t,this)},update:function(){var t=e(this);if(t.data().init){var i,n=t.turn("options"),o=t.data(),r=t.turn("view");if(t.turn("animating",!1),G(t,r),o.pageObjs[0]=e("<div />",{class:"turn-page p0",css:{width:n.size.width,height:n.size.height}}).hide(),t.css("width",2==n.display?2*n.size.width:n.size.width).css("height",n.size.height),o.pageWrap[0]||t.prepend(o.pageObjs[0]),!n.acceleration)for(i=1;i<=o.totalPages;i++)o.pageObjs[i]&&o.pageObjs[i].css({width:n.size.width,height:n.size.height});return t.turn("center"),e.isArray(r)&&1==r.length&&t.trigger("missing",[r[0]]),this}},view:function(t){var i=e(this),n=i.data();return n.init?void 0===t?n.currentView:(e.inArray(t,T(i,t))||(t=T(i,t)[0]),n.currentView!=t&&(n.currentView=t,G(i,t)),Q(i,n.currentView)):T(i,1)},stop:function(t,i){if(e(this).data().init)return J(e(this),e(this).turn("page"),i),this},version:function(){return"4.1.0"},disable:function(t){var i=e(this),n=i.data();return void 0===t?n.disabled:(n.disabled=!!t,this)},size:function(t){if(void 0===t)return e(this).data().size;var i=e(this),n=i.data();return i.data().size=t,n.init&&(i.turn("options").size=t,i.turn("update")),this},resize:function(){var t=e(this),i=t.data();i.init&&(t.turn("update"),i.opts.autoCenter&&t.turn("center"))},zoom:function(t){var i=e(this).data();return void 0===t?i.zoom:(i.zoom=t,this)},rect:function(){var t=e(this),i=t.data(),n={top:parseInt(t.offset().top,10),left:parseInt(t.offset().left,10),width:parseInt(t.width(),10),height:parseInt(t.height(),10)};return n.right=n.left+n.width,n.bottom=n.top+n.height,n}};function yt(t,e,i,n){var o={};return o[e]=i,o[t]=n,o}function bt(t,e){var i;if(i=w("transform"))return t.css(i,e);for(var n=["Moz","Webkit","Khtml","O","ms"],o=e.charAt(0).toUpperCase()+e.substr(1),r=0;r<n.length;r++)if(g(t[0].style[n[r]+o]))return t.css(n[r]+o,value)}function At(t,e){return t.data()&&t.data().f&&t.data().f.fparent?t.data().f.fparent:e}function xt(t,e,i){var n=At(t);if(n){if(i){var o=t.is(":visible");o||t.show(),t.transform("",!0),i.call(this),o||t.hide()}else n.turn("update")}}e.extend(e.fn,{turn:function(t){var i,n=Array.prototype.slice.call(arguments,1);return this.each(function(){var o=e(this),r=o.data(),a=o.turn("options"),s="object"!=typeof t&&t,h=s&&mt[s];if(h)i=h.apply(this,n);else{if("object"==typeof t||!t)return i=mt.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.turn")}return this}),void 0!==i?i:this},transform:function(t,i){var n={},o=this;if(i){if(o.css(ft.cssPrefix+"transform",t),void 0===arguments[1])return o;o.data("transform",t)}else for(var r=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],a=0;a<r.length;a++)n[r[a]]=t;return o.css(n)},data:function(t,i){var n=Array.prototype.slice.call(arguments,1);return n.length?(xt(this,"change",function(){e.fn.data.apply(this,[t,i])}),this):e.fn.data.apply(this,[t])},on:function(t,i,n){return xt(this,"on"),e.fn.on.apply(this,[t,i,n])},off:function(t,i){return xt(this,"off"),e.fn.off.apply(this,[t,i])},attr:function(t,i){var n=Array.prototype.slice.call(arguments,1);return n.length?(xt(this,"attr",function(){e.fn.attr.apply(this,[t,i])}),this):e.fn.attr.apply(this,[t])},html:function(t){var i=Array.prototype.slice.call(arguments,0);return i.length?(xt(this,"html",function(){e.fn.html.apply(this,i)}),this):e.fn.html.apply(this)},removeAttr:function(t){return xt(this,"removeAttr",function(){e.fn.removeAttr.apply(this,[t])}),this},addClass:function(t){return xt(this,"addClass",function(){e.fn.addClass.apply(this,[t])}),this},removeClass:function(t){return xt(this,"removeClass",function(){e.fn.removeClass.apply(this,[t])}),this},toggleClass:function(t,i){return xt(this,"toggleClass",function(){e.fn.toggleClass.apply(this,[t,i])}),this},css:function(t,i){var n=Array.prototype.slice.call(arguments,1);return n.length?(xt(this,"css",function(){e.fn.css.apply(this,[t,i])}),this):e.fn.css.apply(this,[t])}}),e.extend(e,{isTouch:n}),e.extend(ft,{effects:vt});var zt=function(t,i){function n(){var t=this||window;t.effect=i.effect,t.duration=i.duration,t.direction=i.direction,t.gradients=!!i.gradients,t.turnCorners=i.turnCorners,t.elevation=parseInt(i.elevation,10)||0}function o(){for(var t=this,e=t.turn("size"),i=1;i<=e;i++)t.turn("page",i).removeClass("fixed");if(i=1,e<=10)for(i=1;i<=e;i++)G(t,i);else for(i=1;i<=e;i++)i<=6||i>=e-3?G(t,i):t.turn("page",i).css("display","");return t.trigger("start",[i,t.turn("view",i)]),t}function r(){if(!this.effect)throw new Error('"' + this.effect + '" effect not defined');return this}var a,s,h=e.extend({},{effect:"sheet",duration:600,direction:"ltr",elevation:"auto",gradients:!0,turnCorners:!1,acceleration:!0,page:1,display:"double",size:{width:800,height:600},when:{turned:r,turning:r}},i||{});return h.size&&h.size.width&&h.size.height||e.error("Invalid size"),h.acceleration&&!ft.supports3d&&(h.acceleration=!1),h.acceleration?(h.elevation="auto"==h.elevation?ft.has3d?Math.max(Math.round(.02*h.size.width),10):0:h.elevation,h.gradients=!!h.gradients&&ft.supports3d,a=new n,s=new o,a.call(t,h),t.turn(h),s.call(t)):t.turn(h),t};return function(t){return zt(t,{})}});